<% layout('layout', { title: 'Detalhes do Sensor' }) %>

<h2>Detalhes do Sensor</h2>

<% if (sensor) { %>
  <div class="card">
    <div class="card-body">
      <h5 class="card-title"><%= sensor.name %></h5>
      <p class="card-text">
        Registro: <%= new Date(sensor.registeredAt)?.toLocaleString() %>
      </p>
      <p class="card-text">
        Token: <%= sensor.token %>
      </p>
    </div>
  </div>

    <h4 class="mt-3">Detecções</h4>
    <% if (detects && detects.length > 0) { %>
        <ul class="list-group">
        <% detects.forEach(function(detect) { %>
            <li class="list-group-item d-flex justify-content-between align-items-center">
            <span>
                <strong>Tipo:</strong> <%= detect.type %> <br>
                <small><strong>Data:</strong> <%= new Date(detect.registeredAt).toLocaleString() %></small>
            </span>
            </li>
        <% }) %>
        </ul>
    <% } else { %>
        <div class="alert alert-info mt-3">Sem detecções encontradas para este sensor.</div>
    <% } %>

<% } else { %>
  <div class="alert alert-warning">Sensor não encontrado.</div>
<% } %>

<a href="/sensors" class="btn btn-secondary mt-3">Voltar a lista de sensores</a>
